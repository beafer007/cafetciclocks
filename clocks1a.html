<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Clocks 2 - Kingston / Paris / Manila</title>

  <style>
    :root{
      --bg:#070a0f;
      --text:rgba(255,255,255,0.92);
      --muted:rgba(255,255,255,0.70);

      --cardRadius:28px;
      --glassRadius:22px;

      /* Tweak knobs */
      --citySize:110px;         /* you asked for 110px */
      --timeSize:124px;
      --ampmSize:64px;

      --subSize:34px;           /* 24hr + date line */
      --wxSize:36px;            /* temp line */
      --wxDescSize:34px;        /* condition + tomorrow line */

      --glassPadX:52px;
      --glassPadY:46px;

      --stripeBlur:18px;
      --stripeOpacity:1;        /* keep bright */
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; margin:0; }
    body{
      background: radial-gradient(1200px 900px at 50% 30%, rgba(255,255,255,0.06), transparent 55%),
                  linear-gradient(180deg, #05070b, var(--bg));
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "DejaVu Sans", Arial, sans-serif;
      overflow:hidden;
    }

    .wrap{
      height:100%;
      padding:22px;
      display:flex;
      gap:18px;
      align-items:stretch;
      justify-content:space-between;
    }

    .card{
      position:relative;
      flex:1;
      border-radius: var(--cardRadius);
      overflow:hidden;
      box-shadow: 0 28px 70px rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.10);
      background:
        radial-gradient(1200px 800px at 50% 40%, rgba(0,0,0,0.18), rgba(0,0,0,0.62));
    }

    /* Bright vertical flag bands */
    .card::before{
      content:"";
      position:absolute; inset:-10%;
      background: var(--flag);
      opacity: var(--stripeOpacity);
      filter: saturate(1.25) contrast(1.1) brightness(1.02);
      transform: scale(1.03);
    }

    /* Soft blur wash so it feels ‚Äúprinted‚Äù not harsh */
    .card::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 700px at 50% 40%, rgba(255,255,255,0.10), transparent 60%),
        radial-gradient(1200px 900px at 50% 120%, rgba(0,0,0,0.55), rgba(0,0,0,0.15));
      mix-blend-mode: overlay;
      pointer-events:none;
    }

    .tzPill{
      position:absolute;
      top:18px; right:18px;
      padding:10px 16px;
      border-radius: 999px;
      background: rgba(0,0,0,0.42);
      border: 1px solid rgba(255,255,255,0.18);
      font-weight: 850;
      letter-spacing: .6px;
      color: rgba(255,255,255,0.88);
      backdrop-filter: blur(10px);
      font-size: 18px;
      z-index: 3;
    }

    /* Big center glass block (end-to-end padding feel) */
    .glass{
      position:absolute;
      left:18px; right:18px;
      top:50%;
      transform: translateY(-50%);
      border-radius: var(--glassRadius);
      background: rgba(20,20,22,0.42);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 20px 60px rgba(0,0,0,0.55);
      backdrop-filter: blur(18px);
      padding: var(--glassPadY) var(--glassPadX);
      z-index: 4;
    }

    .header{
      display:flex;
      align-items:baseline;
      justify-content:center;
      gap:22px;
      margin-bottom: 14px;
    }

    .flag{
      width: 110px;
      height: 76px;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.45);
      border: 1px solid rgba(255,255,255,0.18);
      overflow:hidden;
      flex: 0 0 auto;
    }
    .flag svg{ width:100%; height:100%; display:block; }

    .city{
      font-size: var(--citySize);
      font-weight: 950;
      letter-spacing: 0.8px;
      line-height: 1;
      text-shadow: 0 18px 40px rgba(0,0,0,0.55);
      white-space: nowrap;
    }

    .timeRow{
      display:flex;
      justify-content:center;
      align-items:baseline;
      gap: 10px;
      margin-top: 8px;
    }
    .time{
      font-size: var(--timeSize);
      font-weight: 950;
      letter-spacing: 1px;
      line-height: 1;
      text-shadow: 0 18px 40px rgba(0,0,0,0.55);
    }
    .colon{
      display:inline-block;
      width: 26px;
      text-align:center;
      animation: blink 1s steps(1,end) infinite;
    }
    @keyframes blink{ 50%{ opacity:0.25; } }

    .ampm{
      font-size: var(--ampmSize);
      font-weight: 950;
      letter-spacing: 1px;
      opacity: 0.95;
      text-shadow: 0 18px 40px rgba(0,0,0,0.55);
    }

    .sub{
      margin-top: 18px;
      text-align:center;
      font-size: var(--subSize);
      font-weight: 800;
      color: rgba(255,255,255,0.88);
      text-shadow: 0 14px 30px rgba(0,0,0,0.55);
    }

    .date{
      margin-top: 8px;
      text-align:center;
      font-size: 44px;
      font-weight: 950;
      color: rgba(255,255,255,0.92);
      text-shadow: 0 14px 30px rgba(0,0,0,0.55);
    }

    .wxLine{
      margin-top: 20px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 14px;
      font-size: var(--wxSize);
      font-weight: 900;
      color: rgba(255,255,255,0.92);
      text-shadow: 0 14px 30px rgba(0,0,0,0.55);
    }

    .wxIcon{
      width: 48px; height: 48px;
      border-radius: 12px;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.14);
      display:grid;
      place-items:center;
      font-size: 28px;
      box-shadow: 0 14px 30px rgba(0,0,0,0.45);
      backdrop-filter: blur(10px);
      flex: 0 0 auto;
    }

    .wxDesc{
      margin-top: 10px;
      text-align:center;
      font-size: var(--wxDescSize);
      font-weight: 850;
      color: rgba(255,255,255,0.86);
      text-shadow: 0 14px 30px rgba(0,0,0,0.55);
    }

    /* make it look good on 1080p signage */
    @media (max-width: 1100px){
      :root{ --citySize:78px; --timeSize:96px; --ampmSize:48px; }
      .flag{ width:84px; height:58px; }
      .date{ font-size: 34px; }
      .wxIcon{ width:40px; height:40px; font-size:24px; }
    }
  </style>
</head>

<body>
  <div class="wrap" id="wrap"></div>

  <script>
    // ====== CONFIG (set 2) ======
    const WEATHER_REFRESH_MS = 15 * 60 * 1000;

    // Open-Meteo codes -> emoji + label
    function wxFromCode(code){
      const map = {
        0:["‚òÄÔ∏è","Clear"],1:["üå§Ô∏è","Mostly clear"],2:["‚õÖ","Partly cloudy"],3:["‚òÅÔ∏è","Overcast"],
        45:["üå´Ô∏è","Fog"],48:["üå´Ô∏è","Rime fog"],
        51:["üå¶Ô∏è","Drizzle"],53:["üå¶Ô∏è","Drizzle"],55:["üå¶Ô∏è","Drizzle"],
        56:["üåßÔ∏è","Freezing drizzle"],57:["üåßÔ∏è","Freezing drizzle"],
        61:["üåßÔ∏è","Rain"],63:["üåßÔ∏è","Rain"],65:["üåßÔ∏è","Heavy rain"],
        66:["üåßÔ∏è","Freezing rain"],67:["üåßÔ∏è","Freezing rain"],
        71:["üå®Ô∏è","Snow"],73:["üå®Ô∏è","Snow"],75:["üå®Ô∏è","Heavy snow"],77:["üå®Ô∏è","Snow grains"],
        80:["üå¶Ô∏è","Showers"],81:["üå¶Ô∏è","Showers"],82:["üåßÔ∏è","Heavy showers"],
        85:["üå®Ô∏è","Snow showers"],86:["üå®Ô∏è","Snow showers"],
        95:["‚õàÔ∏è","Thunderstorm"],96:["‚õàÔ∏è","Thunderstorm"],99:["‚õàÔ∏è","Thunderstorm"]
      };
      return map[code] || ["üå°Ô∏è","Weather"];
    }

    const CITIES = [
      {
        label: "Kingston",
        tz: "America/Jamaica",
        tzBadge: "EST",
        lat: 17.9712, lon: -76.7936,
        // Jamaica flag-ish: green | gold | black | gold | green (vertical vibe)
        flagCss: "linear-gradient(90deg,#0b7a3a 0 22%, #f2c500 22% 40%, #111 40% 60%, #f2c500 60% 78%, #0b7a3a 78% 100%)",
        flagSvg: jamaicaFlagSvg()
      },
      {
        label: "Paris",
        tz: "Europe/Paris",
        tzBadge: "CET",
        lat: 48.8566, lon: 2.3522,
        flagCss: "linear-gradient(90deg,#0055A4 0 33.333%, #ffffff 33.333% 66.666%, #EF4135 66.666% 100%)",
        flagSvg: franceFlagSvg()
      },
      {
        label: "Manila",
        tz: "Asia/Manila",
        tzBadge: "GMT+8",
        lat: 14.5995, lon: 120.9842,
        // Philippines vibe: blue | white | red
        flagCss: "linear-gradient(90deg,#0038A8 0 33.333%, #ffffff 33.333% 66.666%, #CE1126 66.666% 100%)",
        flagSvg: philippinesFlagSvg()
      }
    ];

    // ====== tiny inline SVG flags (no emoji dependency) ======
    function franceFlagSvg(){
      return `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200">
        <rect width="100" height="200" x="0" fill="#0055A4"/>
        <rect width="100" height="200" x="100" fill="#FFFFFF"/>
        <rect width="100" height="200" x="200" fill="#EF4135"/>
      </svg>`;
    }

    function jamaicaFlagSvg(){
      // Simplified diagonal cross (close enough for signage)
      return `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200">
        <rect width="300" height="200" fill="#0B7A3A"/>
        <polygon points="0,0 140,0 300,110 300,200 160,200 0,90" fill="#111"/>
        <polygon points="300,0 160,0 0,110 0,200 140,200 300,90" fill="#111"/>
        <polygon points="0,0 20,0 300,180 300,200 280,200 0,20" fill="#F2C500"/>
        <polygon points="300,0 280,0 0,180 0,200 20,200 300,20" fill="#F2C500"/>
        <polygon points="0,200 0,180 280,0 300,0 300,20 20,200" fill="#F2C500"/>
        <polygon points="300,200 300,180 20,0 0,0 0,20 280,200" fill="#F2C500"/>
      </svg>`;
    }

    function philippinesFlagSvg(){
      // Simplified: blue/red + white triangle + sun + 3 stars
      return `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200">
        <rect width="300" height="100" y="0" fill="#0038A8"/>
        <rect width="300" height="100" y="100" fill="#CE1126"/>
        <polygon points="0,0 0,200 140,100" fill="#FFFFFF"/>
        <circle cx="55" cy="100" r="20" fill="#FCD116"/>
        <circle cx="55" cy="100" r="8" fill="#FFFFFF" opacity="0.25"/>
        <g fill="#FCD116">
          <circle cx="20" cy="30" r="7"/>
          <circle cx="20" cy="170" r="7"/>
          <circle cx="115" cy="100" r="7"/>
        </g>
      </svg>`;
    }

    // ====== formatting helpers ======
    function pad2(n){ return String(n).padStart(2,"0"); }
    function fToC(f){ return Math.round((f - 32) * 5/9); }

    function timeParts(tz){
      const parts = new Intl.DateTimeFormat("en-US", {
        timeZone: tz,
        hour: "numeric",
        minute: "2-digit",
        hour12: true
      }).formatToParts(new Date());
      const hour = parts.find(p=>p.type==="hour")?.value ?? "12";
      const minute = parts.find(p=>p.type==="minute")?.value ?? "00";
      const ampm = (parts.find(p=>p.type==="dayPeriod")?.value ?? "").toUpperCase();
      return { hour, minute, ampm };
    }

    function time24(tz){
      const parts = new Intl.DateTimeFormat("en-US", {
        timeZone: tz,
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      }).formatToParts(new Date());
      const h = parts.find(p=>p.type==="hour")?.value ?? "00";
      const m = parts.find(p=>p.type==="minute")?.value ?? "00";
      return `${h}:${m}`;
    }

    function fullDate(tz){
      // Full day name
      return new Intl.DateTimeFormat("en-US", {
        timeZone: tz,
        weekday: "long",
        month: "short",
        day: "2-digit"
      }).format(new Date());
    }

    async function fetchWeather(city){
      // Fahrenheit from API; we convert to C ourselves
      const url =
        `https://api.open-meteo.com/v1/forecast` +
        `?latitude=${encodeURIComponent(city.lat)}` +
        `&longitude=${encodeURIComponent(city.lon)}` +
        `&current=temperature_2m,weather_code` +
        `&daily=temperature_2m_max,temperature_2m_min` +
        `&temperature_unit=fahrenheit` +
        `&forecast_days=2` +
        `&timezone=${encodeURIComponent(city.tz)}`;

      const res = await fetch(url, { cache: "no-store" });
      if (!res.ok) throw new Error("weather failed");
      const data = await res.json();

      const nowF = (typeof data?.current?.temperature_2m === "number") ? Math.round(data.current.temperature_2m) : null;
      const nowCode = data?.current?.weather_code;

      const tmax = data?.daily?.temperature_2m_max;
      const tmin = data?.daily?.temperature_2m_min;

      const tomHiF = Array.isArray(tmax) && typeof tmax[1] === "number" ? Math.round(tmax[1]) : null;
      const tomLoF = Array.isArray(tmin) && typeof tmin[1] === "number" ? Math.round(tmin[1]) : null;

      return { nowF, nowCode, tomHiF, tomLoF };
    }

    // ====== render ======
    const wrap = document.getElementById("wrap");

    function cardHtml(city){
      return `
        <section class="card" style="--flag:${city.flagCss}">
          <div class="tzPill">${city.tzBadge}</div>

          <div class="glass">
            <div class="header">
              <div class="flag" aria-hidden="true">${city.flagSvg}</div>
              <div class="city">${city.label}</div>
            </div>

            <div class="timeRow">
              <div class="time" data-time="${city.tz}">
                <span data-h></span><span class="colon">:</span><span data-m></span>
              </div>
              <div class="ampm" data-ampm="${city.tz}">AM</div>
            </div>

            <div class="sub" data-24="${city.tz}">24HR 00:00</div>
            <div class="date" data-date="${city.tz}">Thursday, Dec 25</div>

            <div class="wxLine">
              <div class="wxIcon" data-wxicon="${city.tz}">üå°Ô∏è</div>
              <div data-wxtemp="${city.tz}">--¬∞F / --¬∞C</div>
            </div>

            <div class="wxDesc" data-wxdesc="${city.tz}">Loading‚Ä¶</div>
          </div>
        </section>
      `;
    }

    wrap.innerHTML = CITIES.map(cardHtml).join("");

    function tick(){
      for (const city of CITIES){
        const t = timeParts(city.tz);

        const timeEl = document.querySelector(`[data-time="${CSS.escape(city.tz)}"]`);
        if (timeEl){
          timeEl.querySelector("[data-h]").textContent = t.hour;
          timeEl.querySelector("[data-m]").textContent = t.minute;
        }

        const ampmEl = document.querySelector(`[data-ampm="${CSS.escape(city.tz)}"]`);
        if (ampmEl) ampmEl.textContent = t.ampm;

        const t24El = document.querySelector(`[data-24="${CSS.escape(city.tz)}"]`);
        if (t24El) t24El.textContent = `24HR ${time24(city.tz)}`;

        const dateEl = document.querySelector(`[data-date="${CSS.escape(city.tz)}"]`);
        if (dateEl) dateEl.textContent = fullDate(city.tz);
      }
    }

    async function refreshWeather(){
      const jobs = CITIES.map(async (city) => {
        try{
          const wx = await fetchWeather(city);
          const [icon, label] = wxFromCode(wx.nowCode);

          const nowF = (wx.nowF !== null) ? wx.nowF : null;
          const nowC = (nowF !== null) ? fToC(nowF) : null;

          const hiF = wx.tomHiF, loF = wx.tomLoF;
          const hiC = (hiF !== null) ? fToC(hiF) : null;
          const loC = (loF !== null) ? fToC(loF) : null;

          const iconEl = document.querySelector(`[data-wxicon="${CSS.escape(city.tz)}"]`);
          if (iconEl) iconEl.textContent = icon;

          const tempEl = document.querySelector(`[data-wxtemp="${CSS.escape(city.tz)}"]`);
          if (tempEl){
            tempEl.textContent =
              (nowF !== null && nowC !== null) ? `${nowF}¬∞F / ${nowC}¬∞C` : `--¬∞F / --¬∞C`;
          }

          const descEl = document.querySelector(`[data-wxdesc="${CSS.escape(city.tz)}"]`);
          if (descEl){
            const tomorrow =
              (hiF !== null && loF !== null && hiC !== null && loC !== null)
                ? `Tomorrow ${hiF}/${loF}¬∞F (${hiC}/${loC}¬∞C)`
                : `Tomorrow --/--¬∞F (--/--¬∞C)`;
            descEl.textContent = `${label} ‚Ä¢ ${tomorrow}`;
          }
        } catch {
          const iconEl = document.querySelector(`[data-wxicon="${CSS.escape(city.tz)}"]`);
          const tempEl = document.querySelector(`[data-wxtemp="${CSS.escape(city.tz)}"]`);
          const descEl = document.querySelector(`[data-wxdesc="${CSS.escape(city.tz)}"]`);
          if (iconEl) iconEl.textContent = "üå°Ô∏è";
          if (tempEl) tempEl.textContent = `--¬∞F / --¬∞C`;
          if (descEl) descEl.textContent = `Weather ‚Ä¢ Tomorrow --/--¬∞F (--/--¬∞C)`;
        }
      });

      await Promise.allSettled(jobs);
    }

    // Start
    tick();
    setInterval(tick, 1000);
    refreshWeather();
    setInterval(refreshWeather, WEATHER_REFRESH_MS);
  </script>
</body>
</html>
